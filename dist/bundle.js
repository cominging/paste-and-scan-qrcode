!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var i=n(1),r=n(2),o=function(){this._initialized=!1,this._wrapEmitterFns()};i(o,r.EventEmitter),o.prototype._wrapEmitterFns=function(){var e=this;["on","once"].forEach((function(t){o.prototype[t]=function(){return e._initialized||e._init(),r.EventEmitter.prototype[t].apply(e,arguments)}}))},o.prototype._clipboardSupported=function(){return window.Clipboard},o.prototype._pasteCatcherFocus=function(){this._pasteCatcher.focus()},o.prototype._listenForClick=function(){var e=this;document.addEventListener("click",(function(){e._pasteCatcherFocus()}))},o.prototype._createPasteCatcherIfNeeded=function(){this._clipboardSupported()||(this._pasteCatcher=document.createElement("div"),this._pasteCatcher.setAttribute("contenteditable",""),this._pasteCatcher.style.opacity=0,this._pasteCatcher.style.position="absolute",document.body.appendChild(this._pasteCatcher),this._pasteCatcher.focus(),this._listenForClick())},o.prototype._listenForPaste=function(){var e=this;window.addEventListener("paste",(function(t){e._pasteHandler(t)}))},o.prototype._init=function(){this._createPasteCatcherIfNeeded(),this._listenForPaste(),this._initialized=!0},o.prototype._checkInputOnNextTick=function(){var e=this;setTimeout((function(){e._checkInput()}),1)},o.prototype._pasteHandler=function(e){if(this.emit("pasting-image",e),e.clipboardData&&e.clipboardData.items){for(var t=e.clipboardData.items,n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){var i=t[n].getAsFile(),r=this._getURLObj().createObjectURL(i);this._createImage(r)}}else this._checkInputOnNextTick()},o.prototype._getURLObj=function(){return window.URL||window.webkitURL},o.prototype._checkInput=function(){var e=this._pasteCatcher.childNodes[0];this._pasteCatcher.innerHTML="",e&&"IMG"===e.tagName&&this._createImage(e.src)},o.prototype._createImage=function(e){var t=this,n=new Image;n.onload=function(){t.emit("paste-image",n)},n.src=e},e.exports=new o},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,a;if(h(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=l.bind(i);return r.listener=n,i.wrapFn=r,r}function f(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var h=c.length,u=m(c,h);for(n=0;n<h;++n)o(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return h(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,o,s;if(h(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";n.r(t);class i{static hasCamera(){return navigator.mediaDevices.enumerateDevices().then(e=>e.some(e=>"videoinput"===e.kind)).catch(()=>!1)}constructor(e,t,n=i.DEFAULT_CANVAS_SIZE){this.$video=e,this.$canvas=document.createElement("canvas"),this._onDecode=t,this._paused=this._active=!1,this.$canvas.width=n,this.$canvas.height=n,this._sourceRect={x:0,y:0,width:n,height:n},this._onCanPlay=this._onCanPlay.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.addEventListener("canplay",this._onCanPlay),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrWorker=new Worker(i.WORKER_PATH)}destroy(){this.$video.removeEventListener("canplay",this._onCanPlay),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),this._qrWorker.postMessage({type:"close"})}start(){if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();let e="environment";return this._getCameraStream("environment",!0).catch(()=>(e="user",this._getCameraStream())).then(t=>{this.$video.srcObject=t,this._setVideoMirror(e)}).catch(e=>{throw this._active=!1,e})}stop(){this.pause(),this._active=!1}pause(){this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout(()=>{let e=this.$video.srcObject&&this.$video.srcObject.getTracks()[0];e&&(e.stop(),this._offTimeout=this.$video.srcObject=null)},300)))}static scanImage(e,t=null,n=null,r=null,o=!1,s=!1){let a=!1,c=new Promise((s,c)=>{let h,u,d;n||(n=new Worker(i.WORKER_PATH),a=!0,n.postMessage({type:"inversionMode",data:"both"})),u=e=>{"qrResult"===e.data.type&&(n.removeEventListener("message",u),n.removeEventListener("error",d),clearTimeout(h),null!==e.data.data?s(e.data.data):c("QR code not found."))},d=e=>{n.removeEventListener("message",u),n.removeEventListener("error",d),clearTimeout(h),c("Scanner error: "+(e?e.message||e:"Unknown Error"))},n.addEventListener("message",u),n.addEventListener("error",d),h=setTimeout(()=>d("timeout"),3e3),i._loadImage(e).then(e=>{e=i._getImageData(e,t,r,o),n.postMessage({type:"decode",data:e},[e.data.buffer])}).catch(d)});return t&&s&&(c=c.catch(()=>i.scanImage(e,null,n,r,o))),c.finally(()=>{a&&n.postMessage({type:"close"})})}setGrayscaleWeights(e,t,n,i=!0){this._qrWorker.postMessage({type:"grayscaleWeights",data:{red:e,green:t,blue:n,useIntegerApproximation:i}})}setInversionMode(e){this._qrWorker.postMessage({type:"inversionMode",data:e})}_onCanPlay(){this._updateSourceRect(),this.$video.play()}_onPlay(){this._updateSourceRect(),this._scanFrame()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_updateSourceRect(){let e=Math.round(2/3*Math.min(this.$video.videoWidth,this.$video.videoHeight));this._sourceRect.width=this._sourceRect.height=e,this._sourceRect.x=(this.$video.videoWidth-e)/2,this._sourceRect.y=(this.$video.videoHeight-e)/2}_scanFrame(){if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame(()=>{i.scanImage(this.$video,this._sourceRect,this._qrWorker,this.$canvas,!0).then(this._onDecode,e=>{this._active&&"QR code not found."!==e&&console.error(e)}).then(()=>this._scanFrame())})}_getCameraStream(e,t=!1){let n=[{width:{min:1024}},{width:{min:768}},{}];return e&&(t&&(e={exact:e}),n.forEach(t=>t.facingMode=e)),this._getMatchingCameraStream(n)}_getMatchingCameraStream(e){return 0===e.length?Promise.reject("Camera not found."):navigator.mediaDevices.getUserMedia({video:e.shift()}).catch(()=>this._getMatchingCameraStream(e))}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}static _getImageData(e,t=null,n=null,i=!1){n=n||document.createElement("canvas");let r=t&&t.x?t.x:0,o=t&&t.y?t.y:0,s=t&&t.width?t.width:e.width||e.videoWidth;return t=t&&t.height?t.height:e.height||e.videoHeight,i||n.width===s&&n.height===t||(n.width=s,n.height=t),(i=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,i.drawImage(e,r,o,s,t,0,0,n.width,n.height),i.getImageData(0,0,n.width,n.height)}static _loadImage(e){if(e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||window.ImageBitmap&&e instanceof window.ImageBitmap||window.OffscreenCanvas&&e instanceof window.OffscreenCanvas)return Promise.resolve(e);if(e instanceof Image)return i._awaitImageLoad(e).then(()=>e);if(e instanceof File||e instanceof URL||"string"==typeof e){let t=new Image;return t.src=e instanceof File?URL.createObjectURL(e):e,i._awaitImageLoad(t).then(()=>(e instanceof File&&URL.revokeObjectURL(t.src),t))}return Promise.reject("Unsupported image type.")}static _awaitImageLoad(e){return new Promise((t,n)=>{if(e.complete&&0!==e.naturalWidth)t();else{let i,r;i=()=>{e.removeEventListener("load",i),e.removeEventListener("error",r),t()},r=()=>{e.removeEventListener("load",i),e.removeEventListener("error",r),n("Image load error")},e.addEventListener("load",i),e.addEventListener("error",r)}})}}i.DEFAULT_CANVAS_SIZE=400,i.WORKER_PATH="qr-scanner-worker.min.js";var r=i,o=n(0),s=n.n(o);r.WORKER_PATH="qr-scanner-worker.min.js";const a=document.getElementById("pasted-image-qr-result"),c=document.getElementById("qr-video"),h=document.getElementById("cam-has-camera"),u=document.getElementById("cam-qr-result"),d=document.getElementById("cam-qr-result-timestamp"),l=document.getElementById("file-selector"),p=document.getElementById("file-qr-result");function f(e,t){e.textContent=t,d.textContent=(new Date).toString(),e.style.color="teal",clearTimeout(e.highlightTimeout),e.highlightTimeout=setTimeout(()=>e.style.color="inherit",100)}s.a.on("paste-image",(function(e){document.getElementById("pastedImage").innerHTML="",document.getElementById("pastedImage").append(e),r.scanImage(e).then(e=>f(a,e)).catch(e=>f(a,e||"No QR code found."))})),r.hasCamera().then(e=>{h.textContent=e});const v=new r(c,e=>f(u,e));v.start().catch(e=>{c.style.display="none",c.after(document.createTextNode("Error: "+e))}),document.getElementById("inversion-mode-select").addEventListener("change",e=>{v.setInversionMode(e.target.value)}),l.addEventListener("change",e=>{const t=l.files[0];t&&r.scanImage(t).then(e=>f(p,e)).catch(e=>f(p,e||"No QR code found."))})}]);